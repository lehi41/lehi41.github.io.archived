"use strict";(self.webpackChunklehi41=self.webpackChunklehi41||[]).push([[36],{36:(k,p,m)=>{m.r(p),m.d(p,{HymnsModule:()=>E});var u=m(8583),l=m(1052),c=m(3996),A=m(3234),e=m(3018);let y=(()=>{class t extends A.a{constructor(){super("hymns")}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var f=m(7988);function _(t,s){1&t&&(e.TgZ(0,"div",4),e._uU(1,"No Data Yet"),e.qZA())}function I(t,s){if(1&t){const i=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td",9),e.TgZ(8,"a",10),e._uU(9,"edit"),e.qZA(),e.TgZ(10,"button",11),e.NdJ("click",function(){const r=e.CHM(i).$implicit;return e.oxw(2).deleteItem(r)}),e._uU(11," delete "),e.qZA(),e.qZA(),e.qZA()}if(2&t){const i=s.$implicit;e.xp6(2),e.Oqu(i.title),e.xp6(2),e.Oqu(i.page_number),e.xp6(2),e.Oqu(i.language),e.xp6(2),e.MGl("routerLink","/admin/hymns/edit/",i.id,"")}}function C(t,s){if(1&t&&(e.TgZ(0,"div",5),e.TgZ(1,"table",6),e.TgZ(2,"thead"),e.TgZ(3,"tr"),e.TgZ(4,"th",7),e._uU(5,"Title"),e.qZA(),e.TgZ(6,"th",7),e._uU(7,"Page"),e.qZA(),e.TgZ(8,"th",7),e._uU(9,"Language"),e.qZA(),e._UZ(10,"th",7),e.qZA(),e.qZA(),e.TgZ(11,"tbody"),e.YNc(12,I,12,4,"tr",8),e.ALo(13,"async"),e.qZA(),e.qZA(),e.qZA()),2&t){const i=e.oxw();e.xp6(12),e.Q6J("ngForOf",e.lcZ(13,1,i.data$))}}let N=(()=>{class t extends c._{constructor(i,n,o){super(i,n),this.route=i,this.router=n,this.hymnsApiService=o,this.hymnsApiService.refreshData(),this.data$=this.hymnsApiService.data$}deleteItem(i){this.hymnsApiService.deleteItem(i.id).then(()=>{this.hymnsApiService.refreshData()})}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(l.gz),e.Y36(l.F0),e.Y36(y))},t.\u0275cmp=e.Xpm({type:t,selectors:[["lehi41-hymns-list"]],features:[e.qOj],decls:9,vars:6,consts:[[1,"d-flex","mb-3","justify-content-between","align-items-center"],["routerLink","/admin/hymns/new","type","button",1,"btn","btn-sm","btn-outline-primary"],["class","empty-data",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"empty-data"],[1,"table-responsive"],["datatable","",1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[1,"text-end"],[1,"btn","btn-outline-primary","btn-sm",3,"routerLink"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"]],template:function(i,n){if(1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"h3"),e._uU(2,"Hymns"),e.qZA(),e.TgZ(3,"a",1),e._uU(4," Add "),e.qZA(),e.qZA(),e.YNc(5,_,2,0,"div",2),e.ALo(6,"async"),e.YNc(7,C,14,3,"div",3),e.ALo(8,"async")),2&i){let o;e.xp6(5),e.Q6J("ngIf",!e.lcZ(6,2,n.data$).length),e.xp6(2),e.Q6J("ngIf",null==(o=e.lcZ(8,4,n.data$))?null:o.length)}},directives:[l.yS,u.O5,f.G,u.sg],pipes:[u.Ov],encapsulation:2}),t})();var H=m(6215),F=m(9112),q=m(8002),d=m(8627);const L={hymnTitle:{defaultValue:"",name:"hymnTitle",placeholder:"Title",required:!0,type:d.o.Text,cssClass:"form-control"},hymnPageNumber:{defaultValue:"",name:"hymnPageNumber",placeholder:"Page number",required:!0,type:d.o.Text,cssClass:"form-control"},hymnUrl:{defaultValue:"",name:"hymnUrl",placeholder:"Url",required:!0,type:d.o.Text,cssClass:"form-control"},hymnLanguage:{defaultValue:"",name:"hymnLanguage",required:!0,cssClass:"form-control",options:[{key:"English",value:"eng"},{key:"Tongan",value:"ton"}],firstOptionLabel:"Select an Language"}};var h=m(665),O=m(8213),U=m(7298);function G(t,s){if(1&t){const i=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){return e.CHM(i),e.oxw().delete()}),e._uU(1," Delete "),e.qZA()}}function R(t,s){1&t&&(e.TgZ(0,"span"),e._uU(1,"Update"),e.qZA())}function S(t,s){1&t&&(e.TgZ(0,"span"),e._uU(1,"Create"),e.qZA())}let g=(()=>{class t extends c._{constructor(i,n,o,r,Z){super(i,n),this.route=i,this.router=n,this.hymnsApiService=o,this.fb=r,this.cd=Z,this.formIsReady$=new H.X(!1),this.daForm=L,this.formGroup=this.fb.group({});const Y=(0,F.aj)([this.pageInfo$,this.hymnsApiService.data$,this.formIsReady$]).pipe((0,q.U)(a=>{const v=a[0];let b;return v.params.has("id")&&(this.itemId=parseInt(v.params.get("id"))),this.itemId&&(b=a[1].find(w=>w.id===this.itemId)),{hymn:b,formIsReady:a[2]}})).subscribe(a=>{a.hymn&&a.formIsReady&&(this.formGroup.controls[this.daForm.hymnTitle.name].setValue(a.hymn.title),this.formGroup.controls[this.daForm.hymnPageNumber.name].setValue(a.hymn.page_number),this.formGroup.controls[this.daForm.hymnLanguage.name].setValue(a.hymn.language))});this.subscriptions.push(Y)}ngOnDestroy(){this.onDestroy()}submit(){this.itemId?this.updateHymn():this.createHymn()}createHymn(){this.hymnsApiService.createItem({title:this.formGroup.controls[this.daForm.hymnTitle.name].value,page_number:this.formGroup.controls[this.daForm.hymnPageNumber.name].value,url:this.formGroup.controls[this.daForm.hymnUrl.name].value,language:this.formGroup.controls[this.daForm.hymnLanguage.name].value}).then(()=>{this.cd.detectChanges(),this.hymnsApiService.refreshData(),this.router.navigate(["/admin/hymns"])})}updateHymn(){this.hymnsApiService.updateItem(this.itemId,{title:this.formGroup.controls[this.daForm.hymnTitle.name].value,page_number:this.formGroup.controls[this.daForm.hymnPageNumber.name].value,url:this.formGroup.controls[this.daForm.hymnUrl.name].value,language:this.formGroup.controls[this.daForm.hymnLanguage.name].value}).then(()=>{this.cd.detectChanges(),this.hymnsApiService.refreshData(),this.router.navigate(["/admin/hymns"])})}delete(){this.hymnsApiService.deleteItem(this.itemId).then(()=>this.cd.detectChanges())}isReady(i,n){this.daForm[i].isReady=n;let o=!0;Object.keys(this.daForm).forEach(r=>{this.daForm[r].isReady||(o=!1)}),this.formIsReady$.next(o)}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(l.gz),e.Y36(l.F0),e.Y36(y),e.Y36(h.qu),e.Y36(e.sBO))},t.\u0275cmp=e.Xpm({type:t,selectors:[["lehi41-hymns-new-or-edit"]],features:[e.qOj],decls:19,vars:20,consts:[[1,"d-flex","mb-3","justify-content-between","align-items-center"],["routerLink","/admin/hymns","type","button",1,"btn","btn-sm","btn-outline-primary"],[1,"form-group","mb-3"],[3,"formGroup","formItem","isReady"],["class","btn btn-sm btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-primary",3,"disabled","click"],[4,"ngIf"],[1,"btn","btn-sm","btn-danger",3,"click"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"h3"),e._uU(2,"New Hymn"),e.qZA(),e.TgZ(3,"a",1),e._uU(4," Back "),e.qZA(),e.qZA(),e.ynx(5),e.TgZ(6,"div",2),e.TgZ(7,"lehi41-mmi-input",3),e.NdJ("isReady",function(r){return n.isReady(n.daForm.hymnTitle.name,r)}),e.qZA(),e.qZA(),e.TgZ(8,"div",2),e.TgZ(9,"lehi41-mmi-input",3),e.NdJ("isReady",function(r){return n.isReady(n.daForm.hymnPageNumber.name,r)}),e.qZA(),e.qZA(),e.TgZ(10,"div",2),e.TgZ(11,"lehi41-mmi-input",3),e.NdJ("isReady",function(r){return n.isReady(n.daForm.hymnUrl.name,r)}),e.qZA(),e.qZA(),e.TgZ(12,"div",2),e.TgZ(13,"lehi41-mmi-select",3),e.NdJ("isReady",function(r){return n.isReady(n.daForm.hymnLanguage.name,r)}),e.qZA(),e.qZA(),e.TgZ(14,"div"),e.YNc(15,G,2,0,"button",4),e.TgZ(16,"button",5),e.NdJ("click",function(){return n.submit()}),e.YNc(17,R,2,0,"span",6),e.YNc(18,S,2,0,"span",6),e.qZA(),e.qZA(),e.BQk()),2&i&&(e.xp6(7),e.Q6J("formGroup",n.formGroup)("formItem",n.daForm.hymnTitle),e.xp6(2),e.Q6J("formGroup",n.formGroup)("formItem",n.daForm.hymnPageNumber),e.xp6(2),e.Q6J("formGroup",n.formGroup)("formItem",n.daForm.hymnUrl),e.xp6(2),e.Q6J("formGroup",n.formGroup)("formItem",n.daForm.hymnLanguage),e.xp6(1),e.ekj("text-right",!n.itemId)("d-flex",n.itemId)("justify-content-between",n.itemId),e.xp6(1),e.Q6J("ngIf",n.itemId),e.xp6(1),e.ekj("disabled","INVALID"===n.formGroup.status),e.Q6J("disabled","INVALID"===n.formGroup.status),e.xp6(1),e.Q6J("ngIf",n.itemId),e.xp6(1),e.Q6J("ngIf",!n.itemId))},directives:[l.yS,O.P,h.JL,h.sg,U.u,u.O5],encapsulation:2}),t})();var J=m(1886);const x=[{path:"",component:N},{path:"new",component:g},{path:"edit/:id",component:g}];let E=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[u.ez,l.Bz.forChild(x),f.T,J.q]]}),t})()}}]);