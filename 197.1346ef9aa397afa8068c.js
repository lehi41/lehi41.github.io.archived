"use strict";(self.webpackChunklehi41=self.webpackChunklehi41||[]).push([[197],{8197:($,p,r)=>{r.r(p),r.d(p,{MembersModule:()=>J});var c=r(8583),o=r(1052),u=r(3996),y=r(3234),e=r(3018);let b=(()=>{class t extends y.a{constructor(){super("members")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var f=r(7988);function I(t,m){1&t&&(e.TgZ(0,"div",4),e._uU(1,"No Data Yet"),e.qZA())}function M(t,m){if(1&t){const n=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",9),e.TgZ(4,"a",10),e._uU(5,"edit"),e.qZA(),e.TgZ(6,"button",11),e.NdJ("click",function(){const a=e.CHM(n).$implicit;return e.oxw(2).deleteItem(a)}),e._uU(7," delete "),e.qZA(),e.qZA(),e.qZA()}if(2&t){const n=m.$implicit;e.xp6(2),e.Oqu(n.name),e.xp6(2),e.MGl("routerLink","/admin/members/edit/",n.id,"")}}function T(t,m){if(1&t&&(e.TgZ(0,"div",5),e.TgZ(1,"table",6),e.TgZ(2,"thead"),e.TgZ(3,"tr"),e.TgZ(4,"th",7),e._uU(5,"Name"),e.qZA(),e._UZ(6,"th",7),e.qZA(),e.qZA(),e.TgZ(7,"tbody"),e.YNc(8,M,8,2,"tr",8),e.ALo(9,"async"),e.qZA(),e.qZA(),e.qZA()),2&t){const n=e.oxw();e.xp6(8),e.Q6J("ngForOf",e.lcZ(9,1,n.data$))}}let N=(()=>{class t extends u._{constructor(n,s,i){super(n,s),this.activatedRoute=n,this.router=s,this.membersApiService=i,this.membersApiService.refreshData(),this.data$=this.membersApiService.data$}deleteItem(n){this.membersApiService.deleteItem(n.id).then(()=>{this.membersApiService.refreshData()})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(o.gz),e.Y36(o.F0),e.Y36(b))},t.\u0275cmp=e.Xpm({type:t,selectors:[["lehi41-members-list"]],features:[e.qOj],decls:9,vars:6,consts:[[1,"d-flex","mb-3","justify-content-between","align-items-center"],["routerLink","/admin/members/new","type","button",1,"btn","btn-sm","btn-outline-primary"],["class","empty-data",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"empty-data"],[1,"table-responsive"],["datatable","",1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[1,"text-end"],[1,"btn","btn-outline-primary","btn-sm",3,"routerLink"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"]],template:function(n,s){if(1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"h3"),e._uU(2,"Members"),e.qZA(),e.TgZ(3,"a",1),e._uU(4," Add "),e.qZA(),e.qZA(),e.YNc(5,I,2,0,"div",2),e.ALo(6,"async"),e.YNc(7,T,10,3,"div",3),e.ALo(8,"async")),2&n){let i;e.xp6(5),e.Q6J("ngIf",!e.lcZ(6,2,s.data$).length),e.xp6(2),e.Q6J("ngIf",null==(i=e.lcZ(8,4,s.data$))?null:i.length)}},directives:[o.yS,c.O5,f.G,c.sg],pipes:[c.Ov],encapsulation:2}),t})();var C=r(6215),x=r(9112),O=r(8002);const _={memberName:{defaultValue:"",name:"memberName",placeholder:"Name",required:!0,type:r(8627).o.Text,cssClass:"form-control"}};var l=r(665),S=r(8213);function L(t,m){if(1&t){const n=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){return e.CHM(n),e.oxw().delete()}),e._uU(1," Delete "),e.qZA()}}function q(t,m){1&t&&(e.TgZ(0,"span"),e._uU(1,"Update"),e.qZA())}function Y(t,m){1&t&&(e.TgZ(0,"span"),e._uU(1,"Create"),e.qZA())}let h=(()=>{class t extends u._{constructor(n,s,i,a,g){super(n,s),this.activatedRoute=n,this.router=s,this.membersApiService=i,this.fb=a,this.cd=g,this.formIsReady$=new C.X(!1),this.daForm=_,this.formGroup=this.fb.group({});const R=(0,x.aj)([this.pageInfo$,this.membersApiService.data$,this.formIsReady$]).pipe((0,O.U)(d=>{const v=d[0];let A;return v.params.has("id")&&(this.itemId=parseInt(v.params.get("id"))),this.itemId&&(A=d[1].find(w=>w.id===this.itemId)),{member:A,formIsReady:d[2]}})).subscribe(d=>{d.member&&d.formIsReady&&this.formGroup.controls[this.daForm.memberName.name].setValue(d.member.name)});this.subscriptions.push(R)}ngOnDestroy(){this.onDestroy()}submit(){this.itemId?this.updateMember():this.createMember()}createMember(){this.membersApiService.createItem({name:this.formGroup.controls[this.daForm.memberName.name].value}).then(()=>{this.cd.detectChanges(),this.membersApiService.refreshData(),this.router.navigate(["/admin/members"])})}updateMember(){this.membersApiService.updateItem(this.itemId,{name:this.formGroup.controls[this.daForm.memberName.name].value}).then(()=>{this.cd.detectChanges(),this.membersApiService.refreshData(),this.router.navigate(["/admin/members"])})}delete(){this.membersApiService.deleteItem(this.itemId).then(()=>this.cd.detectChanges())}isReady(n,s){this.daForm[n].isReady=s;let i=!0;Object.keys(this.daForm).forEach(a=>{this.daForm[a].isReady||(i=!1)}),this.formIsReady$.next(i)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(o.gz),e.Y36(o.F0),e.Y36(b),e.Y36(l.qu),e.Y36(e.sBO))},t.\u0275cmp=e.Xpm({type:t,selectors:[["lehi41-members-new-or-edit"]],features:[e.qOj],decls:13,vars:14,consts:[[1,"d-flex","mb-3","justify-content-between","align-items-center"],["routerLink","/admin/callings","type","button",1,"btn","btn-sm","btn-outline-primary"],[1,"form-group","mb-3"],[3,"formGroup","formItem","isReady"],["class","btn btn-sm btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-primary",3,"disabled","click"],[4,"ngIf"],[1,"btn","btn-sm","btn-danger",3,"click"]],template:function(n,s){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"h3"),e._uU(2,"New Member"),e.qZA(),e.TgZ(3,"a",1),e._uU(4," Back "),e.qZA(),e.qZA(),e.ynx(5),e.TgZ(6,"div",2),e.TgZ(7,"lehi41-mmi-input",3),e.NdJ("isReady",function(a){return s.isReady(s.daForm.memberName.name,a)}),e.qZA(),e.qZA(),e.TgZ(8,"div"),e.YNc(9,L,2,0,"button",4),e.TgZ(10,"button",5),e.NdJ("click",function(){return s.submit()}),e.YNc(11,q,2,0,"span",6),e.YNc(12,Y,2,0,"span",6),e.qZA(),e.qZA(),e.BQk()),2&n&&(e.xp6(7),e.Q6J("formGroup",s.formGroup)("formItem",s.daForm.memberName),e.xp6(1),e.ekj("text-right",!s.itemId)("d-flex",s.itemId)("justify-content-between",s.itemId),e.xp6(1),e.Q6J("ngIf",s.itemId),e.xp6(1),e.ekj("disabled","INVALID"===s.formGroup.status),e.Q6J("disabled","INVALID"===s.formGroup.status),e.xp6(1),e.Q6J("ngIf",s.itemId),e.xp6(1),e.Q6J("ngIf",!s.itemId))},directives:[o.yS,S.P,l.JL,l.sg,c.O5],encapsulation:2}),t})();var E=r(1886);const U=[{path:"",component:N},{path:"new",component:h},{path:"edit/:id",component:h}];let J=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[c.ez,o.Bz.forChild(U),f.T,E.q]]}),t})()}}]);